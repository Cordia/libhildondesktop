2008-08-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Update version.

2008-08-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* libhildondesktop/hd-plugin-manager.c
	  (hd_plugin_manager_finalize): Free the load priority data.
	  (hd_plugin_manager_load_plugin_configuration): Add function to load
	  the plugin configuration file and emit the
	  ::plugin-configuration-loaded signal.
	  (hd_plugin_manager_configuration_loaded): Call the
	  hd_plugin_manager_load_plugin_configuration function instead of
	  loading the plugin.
	  (hd_plugin_manager_plugin_configuration_loaded): Add a default
	  method handler for the ::plugin-configuration-loadded signal, which
	  loads the plugins (from the plugin configuration and the
	  .desktop-dir).
	  (hd_plugin_manager_get_property, hd_plugin_manager_class_init): Add
	  plugin-config-key property for the plugin configuration GKeyFile.
	  (hd_plugin_manager_get_plugin_config_key_file): Add a function which
	  returns the plugin configuration GKeyFile.
	  (hd_plugin_manager_set_load_priority_func): Add a function which
	  allows to set a function which set the load priority for plugins.
	* libhildondesktop/hd-plugin-manager.h: Add new function protoypes

	* libhildondesktop/hd-plugin-configuration.h (deleted):
	* libhildondesktop/hd-plugin-configuration.c (deleted):
	* libhildondesktop/Makefile.am: Remove HDPluginConfiguration class
	after the relevant code was moved to
	hd_plugin_manager_plugin_configuration_loaded.

2008-08-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Increase version.

	* examples/status-menu/Makefile.am: Fix SOURCES for
	example-signal-status-area-item plugin.

	* examples/status-menu/example-clock-status-menu-item.c: Update
	example to contain a Status Area widget.

	* libhildondesktop/Makefile.am: Add HDPluginConfiguration and
	HDPluginItem.

	* libhildondesktop/hd-plugin-configuration.c:
	* libhildondesktop/hd-plugin-configuration.h: Add
	HDPluginConfiguration class which adds support for a plugin
	configuration file.

	* libhildondesktop/hd-plugin-item.c:
	* libhildondesktop/hd-plugin-item.h: Add HDPluginItem interface which
	must supports a plugin-id property to identify the plugin (Required
	to support multiple instances of a plugin).

	* libhildondesktop/hd-status-plugin-item.c:
	* libhildondesktop/hd-status-plugin-item.h: Implement the HDPluginItem
	interface.

	* libhildondesktop/hd-plugin-loader-factory.c:
	  (hd_plugin_loader_factory_new, hd_plugin_loader_factory_create):
	* libhildondesktop/hd-plugin-loader-factory.h:
	* libhildondesktop/hd-plugin-loader.c (hd_plugin_loader_load):
	* libhildondesktop/hd-plugin-loader.h (load):
	* libhildondesktop/hd-plugin-loader-default.c
	  (hd_plugin_loader_default_open_module,
	  hd_plugin_loader_default_load): Add support for multiple instances
	  of a plugin by supporting a plugin id argument to identify the
	  plugin instance.

	* libhildondesktop/hd-plugin-module.h:
	* libhildondesktop/hd-plugin-module.c
	  (hd_plugin_module_new_object): Add support for multiple instances of
	  a plugin by supporting a plugin id argument to identify the plugin
	  instance. Set the "plugin-id" property on object construction.
	  (hd_plugin_module_add_type): Make sure the plugin is a HDPluginItem.

	* libhildondesktop/hd-plugin-manager.c
	  (hd_plugin_manager_remove_plugin): Removes a plugin instance instead
	  of all instances.
	  (hd_plugin_manager_remove_plugin_module): Add function to remove all
	  instances of a plugin.
	  (hd_plugin_manager_load_plugin, hd_plugin_manager_plugin_module_added,
	  hd_plugin_manager_plugin_module_removed): Add support for multiple
	  plugin instances.
	  (create_sync_lists, cmp_info_plugin_id, cmp_info_desktop_file,
	  cmp_info_priority, hd_plugin_manager_sync_plugins,
	  hd_plugin_manager_configuration_loaded): Add support for multiple
	  plugin instances. Add support for loading plugin informations from a
	  plugin configuration file (specified in the config file by
	  X-Plugin-Configuration).

	* libhildondesktop/libhildondesktop.h: Add new headers.

2008-08-11  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 2.1.1

2008-08-10  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/libhildondesktop1-examples.install: Install all icons from
	the example directory.

	* examples/status-menu/Makefile.am: Add new examples. Add new icons.

	* examples/status-menu/example-battery-status-area-item.c
	* examples/status-menu/example-battery-status-area-item.h
	* examples/status-menu/example-battery.desktop: Add an example for the
	special Status Area icon.

	* examples/status-menu/example-signal-status-area-item.c
	* examples/status-menu/example-signal-status-area-item.h
	* examples/status-menu/example-signal.desktop: Add another example
	for the other special Status Area icon.

	* examples/status-menu/example-button-status-menu-item.c
	  (example_button_status_menu_item_timeout_cb): Add support for a
	  Status Area icon.

	* examples/status-menu/example-icon-status-menu-item.c
	  (example_icon_status_menu_item_init): Add support for a Status Area
	  icon.

	* examples/status-menu/example-status-area-icon-1.png:
	* examples/status-menu/example-status-area-icon-2.png:
	* examples/status-menu/example-status-area-icon-3.png:
	* examples/status-menu/example-status-area-icon-4.png:
	* examples/status-menu/example-status-area-icon-battery.png:
	* examples/status-menu/example-status-area-icon-signal.png: Add Status
	Area example icons.

2008-08-10  Jan Arne Petersen  <jpetersen@openismus.com>

	* libhildondesktop/hd-plugin-manager.c (
	  hd_plugin_manager_load_configuration,
	  hd_plugin_manager_configuration_loaded,
	  hd_plugin_manager_class_init): Add "configuration-loaded" signal to
	  support loading of additional configuration options.

	* libhildondesktop/hd-plugin-manager.h (configuration_loaded): Add
	virtual function for "configuration-loaded" signal.

2008-08-07  Jan Arne Petersen  <jpetersen@openismus.com>


	* libhildondesktop/hd-plugin-module.h: Add
	HD_PLUGIN_MODULE_DL_FILENAME defintion.
	* libhildondesktop/hd-plugin-module.c (hd_plugin_module_new_object,
	  hd_plugin_module_add_type): Use type data instead of a plugin
	  property to store the dl filename.

	* libhildondesktop/hd-status-plugin-item.h
	(hd_status_plugin_item_get_dl_filename): Return const gchar* instead
	of gchar* (easier for debugging).
	(hd_status_plugin_item_get_dbus_g_connection): Added new function to
	return a DBusGConnection.

	* libhildondesktop/hd-status-plugin-item.c (
	  hd_status_plugin_item_get_dl_filename,
	  hd_status_plugin_item_get_dbus_connection): Use type data instead of
	  a property to store the dl filename.
	  (hd_status_plugin_item_get_dbus_g_connection): Added new function to
	return a DBusGConnection.

	* configure.ac: Add dbus-glib-1 dependency.

2008-08-06  Jan Arne Petersen  <jpetersen@openismus.com>

	* libhildondesktop/hd-status-plugin-item.c
	(hd_status_plugin_item_set_status_area_icon): Fix a bug if icon is
	NULL. Add notification of property change. Enhance documentation.

2008-07-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* autogen.sh:
	* gtk-doc.make:
	* m4/gtk-doc.m4: Use newer gtk-doc templates. Should fix the gtk-doc
	problem. Don't call gtkdocize.

	* Makefile.am:
	* debian/rules: Reenable gtk-doc build.

	* debian/libhildondesktop1-dev.install: Add gtk-doc documentation
	to the -dev package.

	* configure.ac:
	* libhildondesktop/libhildondesktop.pc.in: Add datarootdir and
	datadir. Should fix the variable substitution problems.

2008-07-23  Jan Arne Petersen  <jpetersen@openismus.com>

	* Makefile.am: Remove doc from build.

	* debian/rules: disable gtk-doc.

2008-07-23  Jan Arne Petersen  <jpetersen@openismus.com>

	* autogen.sh: Add call to gtkdocize.

2008-07-23  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Hardcode hildonstatusmenudesktopentrydir, to be fixed
	later.

2008-07-23  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Don't need to expand the
	hildonstatusmenudesktopentrydir variable.

	* examples/status-menu/Makefile.am: Use
	hildonstatusmenudesktopentrydir for the .desktop files.

	* libhildondesktop/libhildondesktop.pc.in: Add
	hildonstatusmenudesktopentrydir variable to .pc file.

2008-07-23  Jan Arne Petersen  <jpetersen@openismus.com>

	* examples/status-menu/example-icon-status-menu-item.c (connection,
	  example_icon_status_menu_item_dispose,
	  example_icon_status_menu_item_class_init,
	  example_icon_status_menu_item_init): Add an example
	  hd_status_plugin_item_get_dbus_connection() function call.

	* libhildondesktop/hd-plugin-manager.c
	  (hd_plugin_manager_plugin_dir_changed,
	  hd_plugin_manager_load_plugin): Use g_debug() instead of g_warning()
	  for debug messages.

	* libhildondesktop/hd-plugin-module.c (hd_plugin_module_new_object):
	Set 'dl-filename' property to the module path.

	* libhildondesktop/hd-status-plugin-item.c
	  (hd_status_plugin_item_get_dl_filename,
	  hd_status_plugin_item_get_dbus_connection): Enhance the gtk-doc
	  documentation.

2008-07-23  Jan Arne Petersen  <jpetersen@openismus.com>

	reviewed by: <delete if not using a buddy>
	patch by: <delete if not someone else's patch>

	* examples/status-menu/example-icon-status-menu-item.c (connection,
	  example_icon_status_menu_item_finalize,
	  example_icon_status_menu_item_class_init,
	  example_icon_status_menu_item_init):
	* libhildondesktop/hd-status-plugin-item.c
	  (hd_status_plugin_item_get_dl_filename):

2008-07-23  Jan Arne Petersen  <jpetersen@openismus.com>

	* examples/status-menu/example-button-status-menu-item.c
	  (example_button_status_menu_item_init): Replace HildonButton with
	  GtkButton for now.
	* examples/status-menu/example-clock-status-menu-item.c
	  (example_clock_status_menu_item_timeout_cb,
	  example_clock_status_menu_item_init): Replace HildonButton with
	  GtkButton.

	* gtk-doc.make: Add missing Makefile for gtk-doc documenation.

2008-07-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* libhildondesktop/hd-plugin-manager.c
	(hd_plugin_manager_plugin_dir_changed): Fix a bug with plugins
	installed by dpkg.

2008-07-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog:
	* debian/control:
	* debian/libhildondesktop1-dev.install:
	* debian/libhildondesktop1-examples.install:
	* debian/libhildondesktop1.install:
	* debian/rules: Add debian packaging files.

2008-07-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* libhildondesktop/hd-status-menu-item.c:
	* libhildondesktop/hd-status-menu-item.h: Remove
	hd_status_menu_item_get_dbus_connection function.

	* libhildondesktop/hd-status-plugin-item.h:
	* libhildondesktop/hd-status-plugin-item.c
	(hd_status_plugin_item_get_dbus_connection): Add
	hd_status_plugin_item_get_dbus_connection function.

	* doc/libhildondesktop-sections.txt: Update gtk-doc.

	* libhildondesktop/libhildondesktop.pc.in: Add gnome-vfs and dbus as
	requirements.

2008-07-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* libhildondesktop/hd-status-plugin-item.h:
	* libhildondesktop/hd-status-plugin-item.c
	(hd_status_plugin_item_finalize, hd_status_plugin_item_get_property,
	hd_status_plugin_item_set_property, hd_status_plugin_item_class_init,
	hd_status_plugin_item_set_status_area_icon): Rename ::dl-name property to
	::dl-filename.
	(hd_status_plugin_item_get_dl_filename): Add
	hd_status_plugin_item_get_dl_filename function.

	* doc/libhildondesktop-sections.txt: Add gtk-doc for new function.

2008-07-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* doc/libhildondesktop-sections.txt:
	* libhildondesktop/hd-status-plugin-item.c
	  (hd_status_plugin_item_dispose, hd_status_plugin_item_finalize,
	  hd_status_plugin_item_get_property,
	  hd_status_plugin_item_set_property, hd_status_plugin_item_class_init,
	  hd_status_plugin_item_init,
	  hd_status_plugin_item_set_status_area_icon):
	* libhildondesktop/hd-status-plugin-item.h: Add ::status-area-icon and
	::dl-name properties to HDStatusPluginItem.

2008-07-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac:
	* examples/status-menu/Makefile.am:
	* libhildondesktop/Makefile.am: Add libdbus dependency.

	* libhildondesktop/hd-status-menu-item.h:
	* libhildondesktop/hd-status-menu-item.c
	(hd_status_menu_item_get_dbus_connection): Add convenience function
	for getting a private D-Bus session/system bus connection.

	* libhildondesktop/hd-status-plugin-item.h:
	* libhildondesktop/hd-status-plugin-item.c
	(hd_status_plugin_item_set_status_area_icon): Add function for setting
	the Status Area icon.

2008-07-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* doc/libhildondesktop-docs.xml:
	* doc/libhildondesktop-sections.txt:
	* doc/libhildondesktop.types:
	* libhildondesktop/Makefile.am:
	* libhildondesktop/hd-status-menu-item.c:
	* libhildondesktop/hd-status-menu-item.h:
	* libhildondesktop/hd-status-plugin-item.c:
	* libhildondesktop/hd-status-plugin-item.h:
	* libhildondesktop/libhildondesktop.h:
	* libhildondesktop/hd-status-plugin-item.c (added):
	* libhildondesktop/hd-status-plugin-item.h (added):
	* libhildondesktop/hd-plugin-item.c (deleted):
	* libhildondesktop/hd-plugin-item.h (deleted): Renamed HDPluginItem
	into HDStatusPluginItem.

	* libhildondesktop/hd-status-area-item.c (deleted):
	* libhildondesktop/hd-status-area-item.h (deleted): Removed unused
	HDStatusArea interface.

2008-07-17  Jan Arne Petersen  <jpetersen@openismus.com>

	* Makefile.am:
	* configure.ac:
	* doc/*:
	* doc/libhildondesktop-docs.xml:
	* doc/libhildondesktop-sections.txt:
	* doc/libhildondesktop.types:
	* doc/version.xml.in: Add gtk-doc documentation support.

	* examples/status-menu/example-button-status-menu-item.c
	  (example_button_status_menu_item_class_init,
	  example_button_status_menu_item_init):
	* examples/status-menu/example-clock-status-menu-item.c
	  (example_clock_status_menu_item_dispose,
	  example_clock_status_menu_item_class_init,
	  example_clock_status_menu_item_init): Remove status-menu-map and
	  status-menu-unmap signals.

	* libhildondesktop/Makefile.am:
	* libhildondesktop/hd-plugin-item.c: 
	* libhildondesktop/hd-plugin-item.h: Add a new base class for plugable
	items.

	* libhildondesktop/hd-status-menu-item.c
	  (hd_status_menu_item_class_init):
	* libhildondesktop/hd-status-menu-item.h (HDStatusMenuItem,
	  HDStatusMenuItemClass): Remove status-menu-map and status-menu-unmap
	  signals. Use HDPluginItem as new parent class.

	* libhildondesktop/hd-plugin-module.h (HD_PLUGIN_MODULE_SYMBOLS_CODE):
	Update documentation.

2008-07-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* README: Add some general information about the library.

	* libhildondesktop/hd-plugin-manager.c
	  (hd_plugin_manager_remove_plugin,
	  hd_plugin_manager_plugin_module_removed): Add a remove_plugin
	  function (required by the new sync_plugins function).

	  (create_sync_lists, hd_plugin_manager_sync_plugins): Add support for
	  syncing a new list of plugins with a list of already loaded plugins.

	  (hd_plugin_manager_get_property, hd_plugin_manager_class_init):
	  Change property "conf-file" to be write only (and construct only).

	  (hd_plugin_manager_load_configuration, hd_plugin_manager_run): Use
	  the new sync_plugins function to load all plugins. Move loading from
	  the run function to the load_configuration function (required by
	  configuration reloading support).

	  (hd_plugin_manager_set_property): Add support for reloading a changed
	  configuration file.

2008-07-14  Jan Arne Petersen  <jpetersen@openismus.com>

	Initial import.
